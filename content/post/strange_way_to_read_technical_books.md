---
title: "GitHubの差分表示を利用して技術書を読む - 『Go言語でつくるインタプリタ』を読んだ"
date: 2022-12-11T00:47:39+09:00
draft: false
tags: ["Book", "静的解析"]
images: ["images/articles/avatar.png"]
description: "最近、長い間積読になっていた技術書を読了しました。一件すると奇妙な読み方に見えますが、相性が合う本および読者であればばかなり読みやすいと思ったので紹介します。"
---

### TL,DR

最近、一件すると奇妙な読み方を編み出して、長い間積読になっていた技術書を読了しました。
具体的には、GitHubを利用してこういうふうにして読んでいます。

![GitHubのPull Requestの差分を利用して実装をわかりやすくする](/images/articles/github_pr_1.png)
GitHubのPull Requestの差分を利用して実装をわかりやすくする
![GitHubのPull Requestのコメントを利用してメモを取る](/images/articles/github_pr_2.png)
![GitHubのPull Requestを利用して本の一部をメモとして残す](/images/articles/github_pr_3.png)
![GitHubのull Requestのラベルを利用して節ごとにわかりやすく一覧化する](/images/articles/github_pr_4.png)

### この読み方をして何をやりたいのか

[『Go言語でつくるインタプリタ』](https://www.oreilly.co.jp/books/9784873118222/)という本があります。
わたしはこの本を2年前に読みはじめましたが、途中で挫折して読み切ることができませんでした。具体的には、構文解析の章でつまづきました。本書ではテスト駆動でテストを書き、テストが成功するように機能を実装し、さらにテストと機能を追加していく流れで進むのですが、途中で追加すべきコードがよくわからなくなったのです。

本書の構文解析の章は他の章に比べてボリュームがあり、ところどころ文章とコードの対比が省略されている部分もあります（サポート用のコードがダウンロードできるので参照するようにと書いて、書籍内では省略されていることがある）。最初に読んだときは読書会で少しずつ読んでいく形式で進めていたのですが、今回は週末を使って一気に読むことにしました。

再開するときに立てた目標は下記の通りです。

- 数日で一気に読み切ること
- 節の区切り、実装の区切りごとに差分をわかりやすく表示すること
- 後から振り返ることができるように差分を保存すること

これらの目的にGitHubのリポジトリを作ってPull Requestを出しながら読んでいくのがぴったりでした。

### メリット

#### 差分が見やすい

紙面上のコードを見ただけで追加・削除などの変更差分がはっきりと浮かんだらいいのですが、わたしはうまくできません。
本の中のコードはだいたい大きさが小さく、差分が赤や緑でわかりやすく表示されることもないので、どうしても目が滑ります。
GitHubのPull Requestを利用すると、見慣れたツール上の見慣れたUIで差分を見ることができて、説明がかなりわかりやすくなります。
また、段落やまとまり単位でPull Requestにすることによって、後から特定の章や節の内容を振り返るのも簡単です。

『Go言語でつくるインタプリタ』は章ごとに字句解析器や構文解析器などを実装していくので、Pull Requestには実装する内容に合わせたラベルをつけました。これで構文解析器を実装した後にREPLを拡張する、といった説明もわかりやすくまとめ、後から振り返ることができるようになりました。

#### メモが取りやすい

GitHubのPull Requestは行ごとにコメントをつけられるので、細かい単位でメモすることが可能です。
コードにコメントアウトとして残してもよいのですが、一度コードを書く（&Pull Requsetを出す）-> 本を読み返す -> わかったことをメモするという手順で、その場で振り返りまでできます。

また、本の特定のページの説明をコードと一緒に後から参照できるようにしたい場合は、Pull Requestにスクリーンショットや写真、コピーしたテキストを貼っておけばまとめて保管ができます。

最初に読んだときもGitHubを利用したのですが、より作業を簡易にするため、Pull Requestは作らず章や節の区切りの単位でcommitするようにしていました。しかし、Pull Requestにした方が一手間かかるとしても、後から一覧して振り返ることができ（前述のようにラベルをつけることもできる）、またメモを取れるので優れています。

紙の本に直接書き込んだりアプリでメモしたものはどこにあるか探すのが大変になりがちですが、GitHubのリポジトリを作って保管しておけば、ロストすることもありません。

### デメリット

#### すべての本に向いている手法ではない

今回紹介した手法が効果を発揮するのは、コードを追記していく「つくって学ぶ」タイプの本です。ほぼ全編自然言語の本や、断片的なコードのサンプルが掲載されているタイプの本には向きません。GitHubのPull Requestを利用した読書法は、差分の見やすさと少しずつ機能を追加していく喜びを増してくれるので、つくって学ぶタイプの本の魅力を増してくれます。

わたしは今年[『実用Go言語』](https://www.oreilly.co.jp/books/9784873119694/)と[『詳解Go言語Webアプリケーション開発』](https://book.mynavi.jp/manatee/books/detail/id=131170)を読む際に、この手法を試しました。このうち『実用Go言語』はつくって学ぶタイプの本ではないので、サンプルコードを写経したり試すのは別の方法が向いています。Go言語は[The Go playground](https://go.dev/play/)というコードを実行して試す場所があるので、これを利用し、振り返りように保存したければコードをシェアするためのリンクを発行して残しておくのがおすすめです。

なお、『実用Go言語』のようなボリュームのある本について、何回かに分けてメモを取りながら読みたい場合は、Zennの「スクラップ」を利用して随時メモを書き足していくのが便利だと感じました。しかし、Zennのスクラップはオープンな場になるので、著作権を侵害しないようにコードや書籍の内容をそのまま貼り付けるのは避けた方がよいです（注意点に後述しました）。

これに対し、『詳解Go言語Webアプリケーション開発』は中盤から後半にかけて1つのWebアプリケーションをつくってブラッシュアップしていくので、Pull Requestを利用した読書法が向いていると感じました。こちらもリポジトリを作って読み進めています。

### 注意点

この読み方を試す際には、本の中のコードやテキストをそのまま公開しないように注意が必要です。Publicリポジトリを利用して公開すると著作権違反に当たるので、Privateリポジトリを使います。

なお、この手法を取るにあたってGitHubの利用規約を読んで違反していないか確認しましたが、このような利用方法は規約に違反していないようでした。もしわたしが読み落としていて、この使い方が違反に当たることがあれば教えてください。

### 最後に

あらゆる本について、座って一読しただけで頭に入ればいいなといつも夢見ているのですが、そううまくはいきません。地道に写経したり、何度も読み返したり、ある程度わかったら読み飛ばしてまたいつか読めばいいと割り切ったり、いろいろ工夫して自分にあった手法を編み出すと楽しいです。

ちなみに『Go言語でつくるインタプリタ』を読了した感想は[2年前のゆーすけべーさんのブログ](https://yusukebe.com/posts/2020/writing-an-interpreter-in-go/)に書いてある感想とまったく同じでした。2年前、本を読み始めたときにブログポストを読んだはずなので、感慨深いです。ちょうどよいボリューム感のコードを書いてインタプリタを楽しく実装できる名作でした。
